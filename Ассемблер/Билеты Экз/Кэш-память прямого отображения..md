Связи: [[_Навигатор Билеты Ассемблер]]
Теги: #Ассемблер #Теория 

# Содержание: 
- [[#Основная идея прямого отображения]]
- [[#Этапы поиска в кэше]]

# Основная идея прямого отображения

Основная идея прямого отображения (direct mapping) RAM на кэш-память состоит в следующем: RAM делится на сегменты, причем размер каждого сегмента равен размеру кэша, а каждый сегмент в свою очередь делится на блоки, размер каждого блока равен размеру кэш-линии.

Блоки RAM из разных сегментов, но с одинаковыми номерами в этих сегментах, всегда будут отображаться на одну и ту же кэш-линию кэша:
![[Pasted image 20230514022707.png]]
Адрес каждого байта представляет собой сумму порядкового номера сегмента, порядкового номера кэш-линии внутри сегмента и порядкового номера байта внутри кэш-линии. Отсюда следует, что адреса байт различаются только старшими частями, представляющими собой порядковые номера сегментов, а порядковые номера кэш-линий внутри сегментов и порядковые номера байт внутри кэш-линий — повторяются.  
  
Таким образом нет необходимости хранить полный адрес кэш-линии, достаточно сохранить только старшую часть адреса. Тэг (tag) каждой кэш-линии как раз и хранит старшую часть адреса первого байта в данной кэш-линии.

b — размер кэш-линии.  
m — количество кэш-линий в кэше.  
  
Для адресации b байт внутри каждой кэш-линии потребуется: log2b бит.  
Для адресации m кэш-линий внутри каждого сегмента потребуется: log2m бит.  
  
m = Объем кэш-памяти/Размер кэш линии.  
  
Для адресации N сегментов RAM: log2N бит.  
  
N = Объем RAM/Размер сегмента.  
  
Для адресации байта потребуется: log2N + log2m + log2b бит.

# Этапы поиска в кэше

1. Извлекается средняя часть адреса (log2m), определяющая номер кэш-линии в кэше.  
2. Тэг кэш-линии с данным номером сравнивается со старшей частью адреса (log2N).  
  
Если было совпадение по одному из тэгов, то произошло кэш-попадание.  
Если не было совпадение ни по одному из тэгов, то произошел кэш-промах.