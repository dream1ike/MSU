Связи: [[_Навигатор Билеты Ассемблер]]
Теги: #Ассемблер #Теория 

# Содержание:
- [[#Менеджер памяти]]
- [[#Иерархия менеджеров памяти]]
- [[#Остальные задачи менеджера памяти]]

# Менеджер памяти

**Менеджер памяти** — часть [компьютерной программы](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0 "Компьютерная программа") (как [прикладной](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B8%D0%BA%D0%BB%D0%B0%D0%B4%D0%BD%D0%B0%D1%8F_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0 "Прикладная программа"), так и [операционной системы](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0 "Операционная система")), обрабатывающая запросы на выделение и освобождение [оперативной памяти](https://ru.wikipedia.org/wiki/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%B0%D1%8F_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D1%8C "Оперативная память") или (для некоторых [архитектур](https://ru.wikipedia.org/wiki/%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D0%AD%D0%92%D0%9C "Архитектура ЭВМ") [ЭВМ](https://ru.wikipedia.org/wiki/%D0%AD%D0%92%D0%9C "ЭВМ")) запросы на включение заданной области памяти в [адресное пространство](https://ru.wikipedia.org/wiki/%D0%90%D0%B4%D1%80%D0%B5%D1%81%D0%BD%D0%BE%D0%B5_%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%BE "Адресное пространство") [процессора](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80 "Процессор").

Основное назначение менеджера памяти в первом смысле — реализация [динамической памяти](https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D0%BD%D0%B0%D0%BC%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8_%D1%80%D0%B0%D1%81%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%8F%D0%B5%D0%BC%D0%B0%D1%8F_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D1%8C "Динамически распределяемая память"). Например, в [языке](https://ru.wikipedia.org/wiki/%D0%AF%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F "Язык программирования") [C](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F) "Си (язык программирования)") динамическое выделение памяти производится через функцию [malloc](https://ru.wikipedia.org/wiki/Malloc "Malloc").

# Иерархия менеджеров памяти

Менеджеры памяти часто образуют иерархию: нижестоящие менеджеры задействуют какие-либо закономерности выделения-освобождения памяти и этим снижают нагрузку на вышестоящие. Например:

- **Системный**. Сверху находится менеджер памяти, встроенный в ОС. Он вносит ту или иную [страницу](https://ru.wikipedia.org/wiki/%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8 "Страничная организация памяти") в адресное пространство процесса — а значит, работает с дискретностью в 4 килобайта, что делает его очень медленным.

- **Принадлежащий процессу.** Менеджер памяти, встроенный в [стандартную библиотеку языка программирования](https://ru.wikipedia.org/wiki/%D0%91%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0_%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8_%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F "Библиотека времени выполнения"), берёт у ОС блоки памяти «оптом» и раздаёт их сообразно с нуждами программиста. При этом он знает, что память отдаётся только одному процессу .

- **Специализированные**. Некоторые динамические структуры данных, например, [std::vector](https://ru.wikipedia.org/wiki/Std::vector "Std::vector"), также берут память у стандартной библиотеки с запасом (обычно, блоками экспоненциально увеличивающегося размера). Таким образом, элементы добавляются по одному, но обращение к вышестоящему менеджеру происходит один раз на большое количество элементов.

# Остальные задачи менеджера памяти

- Отображение виртуальной памяти в физическую. То есть каждая страница виртуальной памяти должна ссылаться на физическую страницу (на жестком диске или в оперативной памяти).

- Выделение и освобождение виртуальной памяти. То есть, если процессу нужно записать какую-то информацию в память, то диспетчер памяти может выделить для процесса дополнительную память. А если процесс завершает свою работу, то диспетчер памяти должен память процесса освободить.

- Совместное использование памяти между процессами. Если два или более процесса работают с одним блоком памяти, то нужно разруливать блокировки, права доступов и тому подобное.

- Отображение файлов в память. Прочитанный файл с диска следующий раз читается из оперативной памяти. Для этого часть оперативной памяти выделяется под cache и туда помещают прочитанные файлы.

![[Pasted image 20230514140046.png]]